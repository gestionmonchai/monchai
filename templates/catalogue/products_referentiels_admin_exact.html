{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}R√©f√©rentiels | Mon Chai Administration{% endblock %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'admin/css/changelists.css' %}">
{% endblock %}

{% block content %}
<!-- Breadcrumbs EXACTEMENT comme admin -->
<nav aria-label="Fil d'Ariane">
<div class="breadcrumbs">
<a href="/admin/">Accueil</a>
&rsaquo; <a href="/catalogue/produits/">Gestion des produits</a>
&rsaquo; R√©f√©rentiels
</div>
</nav>

<div class="main" id="main">
  <main id="content-start" class="content" tabindex="-1">
    <div id="content" class="">
      
      <h1>R√©f√©rentiels de production</h1>
      
      <div id="content-main">
        
        <!-- Module changelist EXACTEMENT comme admin -->
        <div class="module filtered" id="changelist">
          <div class="changelist-form-container">
            
            <!-- Sections r√©f√©rentiels avec style admin exact -->
            <div class="results">
              
              <!-- Section C√©pages -->
              <div style="margin-bottom: 30px;">
                <h2 style="background: #417690; color: #fff; font-size: 11px; font-weight: bold; margin: 0; padding: 8px 15px; text-transform: uppercase;">
                  üçá C√©pages
                </h2>
                <table id="result_list">
                  <thead>
                    <tr>
                      <th scope="col" class="sortable column-name">
                        <div class="text"><a href="/referentiels/cepages/">Nom</a></div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-couleur">
                        <div class="text">Couleur</div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-code">
                        <div class="text">Code</div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-actions">
                        <div class="text">Actions</div>
                        <div class="clear"></div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for cepage in cepages %}
                    <tr>
                      <th class="field-name">
                        <a href="/referentiels/cepages/{{ cepage.id }}/">{{ cepage.nom }}</a>
                      </th>
                      <td class="field-couleur">
                        <span class="badge badge-{{ cepage.couleur|lower }}">{{ cepage.get_couleur_display }}</span>
                      </td>
                      <td class="field-code">{{ cepage.code|default:"-" }}</td>
                      <td class="field-actions">
                        <a href="/referentiels/cepages/{{ cepage.id }}/modifier/" class="changelink">Modifier</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="4">Aucun c√©page trouv√©. <a href="/referentiels/cepages/nouveau/">Ajouter un c√©page</a></td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                <p class="paginator">
                  {{ cepages|length }} C√©page{{ cepages|length|pluralize:"s" }}
                  <a href="/referentiels/cepages/nouveau/" class="addlink" style="margin-left: 15px;">Ajouter c√©page</a>
                </p>
              </div>

              <!-- Section Parcelles -->
              <div style="margin-bottom: 30px;">
                <h2 style="background: #417690; color: #fff; font-size: 11px; font-weight: bold; margin: 0; padding: 8px 15px; text-transform: uppercase;">
                  üå± Parcelles
                </h2>
                <table id="result_list">
                  <thead>
                    <tr>
                      <th scope="col" class="sortable column-nom">
                        <div class="text"><a href="/referentiels/parcelles/">Nom</a></div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-surface">
                        <div class="text">Surface (ha)</div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-actions">
                        <div class="text">Actions</div>
                        <div class="clear"></div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for parcelle in parcelles %}
                    <tr>
                      <th class="field-nom">
                        <a href="/referentiels/parcelles/{{ parcelle.id }}/">{{ parcelle.nom }}</a>
                      </th>
                      <td class="field-surface">{{ parcelle.surface_ha|floatformat:2 }} ha</td>
                      <td class="field-actions">
                        <a href="/referentiels/parcelles/{{ parcelle.id }}/modifier/" class="changelink">Modifier</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="3">Aucune parcelle trouv√©e. <a href="/referentiels/parcelles/nouvelle/">Ajouter une parcelle</a></td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                <p class="paginator">
                  {{ parcelles|length }} Parcelle{{ parcelles|length|pluralize:"s" }}
                  <a href="/referentiels/parcelles/nouvelle/" class="addlink" style="margin-left: 15px;">Ajouter parcelle</a>
                </p>
              </div>

              <!-- Section Unit√©s -->
              <div style="margin-bottom: 30px;">
                <h2 style="background: #417690; color: #fff; font-size: 11px; font-weight: bold; margin: 0; padding: 8px 15px; text-transform: uppercase;">
                  üìè Unit√©s de mesure
                </h2>
                <table id="result_list">
                  <thead>
                    <tr>
                      <th scope="col" class="sortable column-nom">
                        <div class="text"><a href="/referentiels/unites/">Nom</a></div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-code">
                        <div class="text">Code</div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-actions">
                        <div class="text">Actions</div>
                        <div class="clear"></div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for unite in unites %}
                    <tr>
                      <th class="field-nom">
                        <a href="/referentiels/unites/{{ unite.id }}/">{{ unite.nom }}</a>
                      </th>
                      <td class="field-code">{{ unite.code }}</td>
                      <td class="field-actions">
                        <a href="/referentiels/unites/{{ unite.id }}/modifier/" class="changelink">Modifier</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="3">Aucune unit√© trouv√©e. <a href="/referentiels/unites/nouvelle/">Ajouter une unit√©</a></td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                <p class="paginator">
                  {{ unites|length }} Unit√©{{ unites|length|pluralize:"s" }}
                  <a href="/referentiels/unites/nouvelle/" class="addlink" style="margin-left: 15px;">Ajouter unit√©</a>
                </p>
              </div>

              <!-- Section Entrep√¥ts -->
              <div style="margin-bottom: 30px;">
                <h2 style="background: #417690; color: #fff; font-size: 11px; font-weight: bold; margin: 0; padding: 8px 15px; text-transform: uppercase;">
                  üè≠ Entrep√¥ts
                </h2>
                <table id="result_list">
                  <thead>
                    <tr>
                      <th scope="col" class="sortable column-nom">
                        <div class="text"><a href="/referentiels/entrepots/">Nom</a></div>
                        <div class="clear"></div>
                      </th>
                      <th scope="col" class="sortable column-actions">
                        <div class="text">Actions</div>
                        <div class="clear"></div>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for entrepot in entrepots %}
                    <tr>
                      <th class="field-nom">
                        <a href="/referentiels/entrepots/{{ entrepot.id }}/">{{ entrepot.nom }}</a>
                      </th>
                      <td class="field-actions">
                        <a href="/referentiels/entrepots/{{ entrepot.id }}/modifier/" class="changelink">Modifier</a>
                      </td>
                    </tr>
                    {% empty %}
                    <tr>
                      <td colspan="2">Aucun entrep√¥t trouv√©. <a href="/referentiels/entrepots/nouveau/">Ajouter un entrep√¥t</a></td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
                <p class="paginator">
                  {{ entrepots|length }} Entrep√¥t{{ entrepots|length|pluralize:"s" }}
                  <a href="/referentiels/entrepots/nouveau/" class="addlink" style="margin-left: 15px;">Ajouter entrep√¥t</a>
                </p>
              </div>

              <!-- Section Import CSV -->
              <div style="margin-bottom: 30px;">
                <h2 style="background: #417690; color: #fff; font-size: 11px; font-weight: bold; margin: 0; padding: 8px 15px; text-transform: uppercase;">
                  üìÇ Import en masse
                </h2>
                <div style="padding: 15px; background: #f8f9fa; border: 1px solid #dee2e6;">
                  <p>Importez vos r√©f√©rentiels en masse depuis des fichiers CSV.</p>
                  <a href="/referentiels/import/" class="button default" style="background: #417690; color: white; padding: 8px 16px; text-decoration: none; border-radius: 4px;">
                    Importer des donn√©es CSV
                  </a>
                </div>
              </div>

            </div>

          </div>
        </div>
      </div>
      
      <br class="clear">
    </div>
  </main>
</div>

<style>
.badge-rouge { background: #dc3545; color: white; padding: 2px 8px; border-radius: 3px; font-size: 11px; }
.badge-blanc { background: #f8f9fa; color: #333; padding: 2px 8px; border-radius: 3px; font-size: 11px; border: 1px solid #dee2e6; }
.badge-rose { background: #e83e8c; color: white; padding: 2px 8px; border-radius: 3px; font-size: 11px; }
</style>

{% endblock %}
