{% for customer in customers %}
<tr>
    <td>
        <div class="d-flex align-items-center">
            <div class="flex-shrink-0 me-3">
                <div class="rounded-circle d-flex align-items-center justify-content-center 
                           {% if customer.segment == 'business' %}text-primary bg-primary bg-opacity-10
                           {% elif customer.segment == 'individual' %}text-success bg-success bg-opacity-10
                           {% elif customer.segment == 'wine_shop' %}text-info bg-info bg-opacity-10
                           {% elif customer.segment == 'export' %}text-warning bg-warning bg-opacity-10
                           {% else %}text-secondary bg-secondary bg-opacity-10{% endif %}"
                     style="width: 40px; height: 40px;">
                    <strong>{{ customer.name|slice:":2"|upper }}</strong>
                </div>
            </div>
            <div>
                <div class="fw-medium">
                    <a href="{% url 'ventes:client_detail' customer.id %}" class="text-decoration-none">
                        {{ customer.name }}
                    </a>
                </div>
                {% if customer.vat_number %}
                    <small class="text-muted">TVA: {{ customer.vat_number }}</small>
                {% endif %}
            </div>
        </div>
    </td>
    <td>
        <span class="badge 
                     {% if customer.segment == 'business' %}bg-primary
                     {% elif customer.segment == 'individual' %}bg-success
                     {% elif customer.segment == 'wine_shop' %}bg-info
                     {% elif customer.segment == 'export' %}bg-warning text-dark
                     {% else %}bg-secondary{% endif %}">
            {{ customer.segment_display }}
        </span>
    </td>
    <td>
        {% if customer.email %}
            <div><i class="bi bi-envelope me-1"></i>{{ customer.email }}</div>
        {% endif %}
        {% if customer.phone %}
            <div><i class="bi bi-telephone me-1"></i>{{ customer.phone }}</div>
        {% endif %}
        {% if not customer.email and not customer.phone %}
            <span class="text-muted">Pas de contact</span>
        {% endif %}
    </td>
    <td>
        {% if customer.country_code %}
            <span class="badge bg-light text-dark">{{ customer.country_code }}</span>
        {% else %}
            <span class="text-muted">-</span>
        {% endif %}
    </td>
    <td>
        {% if customer.is_active %}
            <span class="badge bg-success">Actif</span>
        {% else %}
            <span class="badge bg-danger">Inactif</span>
        {% endif %}
    </td>
    <td>
        <div class="btn-group btn-group-sm" role="group">
            <a href="{% url 'ventes:client_detail' customer.id %}" 
               class="btn btn-outline-primary" title="Voir">
                <i class="bi bi-eye"></i>
            </a>
            {% if user.get_active_membership.can_edit_data %}
                <a href="{% url 'ventes:client_edit' customer.id %}" 
                   class="btn btn-outline-secondary" title="Modifier">
                    <i class="bi bi-pencil"></i>
                </a>
            {% endif %}
        </div>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="6" class="text-center py-4">
        <i class="bi bi-people display-4 text-muted mb-3"></i>
        <p class="text-muted">Aucun client trouv√©</p>
    </td>
</tr>
{% endfor %}
