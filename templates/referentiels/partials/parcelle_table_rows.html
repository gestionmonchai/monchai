{% load widget_tweaks %}
{% for parcelle in page_obj %}
    <tr>
        <td>
            <a href="{% url 'production:parcelle_detail' parcelle.pk %}" 
               class="text-decoration-none fw-semibold">
                {{ parcelle.nom }}
            </a>
        </td>
        <td>
            <span class="badge bg-info">{{ parcelle.surface }} ha</span>
        </td>
        <td>
            <span class="badge bg-secondary">{{ parcelle.harvested_kg|default:0 }}</span>
        </td>
        <td class="text-muted">
            {% if parcelle.lieu_dit %}
                {{ parcelle.lieu_dit }}
            {% else %}
                -
            {% endif %}
        </td>
        <td class="text-muted">
            {% if parcelle.commune %}
                {{ parcelle.commune }}
            {% else %}
                -
            {% endif %}
        </td>
        <td class="text-muted">
            {{ parcelle.created_at|date:"d/m/Y" }}
        </td>
        <td>
            <div class="btn-group btn-group-sm">
                <a href="{% url 'production:parcelle_detail' parcelle.pk %}" 
                   class="btn btn-outline-primary" 
                   title="Voir">
                    <i class="bi bi-eye"></i>
                </a>
                {% if user.get_active_membership.can_edit_data %}
                    <a href="{% url 'production:parcelle_update' parcelle.pk %}" 
                       class="btn btn-outline-secondary" 
                       title="Modifier">
                        <i class="bi bi-pencil"></i>
                    </a>
                {% endif %}
            </div>
        </td>
    </tr>
{% empty %}
    <tr>
        <td colspan="6" class="text-center text-muted py-4">
            <i class="bi bi-search fs-1 mb-2"></i>
            <div>Aucune parcelle trouv√©e</div>
        </td>
    </tr>
{% endfor %}
